Running Start

> hdx-adapter@1.1.0 start /opt/hdx-index-adapter
> NODE_PATH=app/src node $NODE_DEBUG_OPTION app/index.js

{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":30,"msg":"Initializing cron","time":"2018-12-24T15:17:36.628Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":20,"msg":"Loading routes...","time":"2018-12-24T15:17:36.649Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":20,"msg":"Loading route /opt/hdx-index-adapter/app/src/routes/api/v1/hdx.router.js, in path /api/v1","time":"2018-12-24T15:17:36.650Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":20,"msg":"Loaded routes correctly!","time":"2018-12-24T15:17:36.670Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":30,"msg":"Server started in  3012","time":"2018-12-24T15:17:36.674Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":30,"msg":"Initializing register microservice","time":"2018-12-24T15:17:36.676Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":20,"msg":"Checking mode","time":"2018-12-24T15:17:36.676Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":20,"msg":"Register microservice complete succesfully!","time":"2018-12-24T15:17:36.853Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":30,"msg":"Running cron update","time":"2018-12-24T15:20:00.013Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":20,"msg":"Obtaining datasets","time":"2018-12-24T15:20:00.013Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":30,"msg":"Adding authentication header ","time":"2018-12-24T15:20:00.013Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":30,"msg":"Adding authentication header ","time":"2018-12-24T15:20:09.164Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":30,"msg":"Adding authentication header ","time":"2018-12-24T15:20:10.872Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":30,"msg":"download url","time":"2018-12-24T15:20:11.253Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":30,"msg":"https://docs.google.com/spreadsheets/d/1HxOT3bSOVGFcQmLA-3wroVlouS1Vy-1lajgnMrR1muA/gviz/tq?tqx=out:csv&sheet=Sheet1","time":"2018-12-24T15:20:11.253Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":30,"msg":"downloaded","time":"2018-12-24T15:20:11.902Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":40,"err":{"message":"downloadPath is not defined","name":"ReferenceError","stack":"ReferenceError: downloadPath is not defined\n    at download.then.data (/opt/hdx-index-adapter/app/src/services/check-csv-data.js:40:31)\n    at process._tickCallback (internal/process/next_tick.js:103:7)"},"msg":"downloadPath is not defined","time":"2018-12-24T15:20:11.906Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":40,"msg":"Dataset Yemen Test with id c99d9ce1-5c25-479c-8707-a3ac95837573 exists, but data is corrupted...Updating","time":"2018-12-24T15:20:11.906Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":20,"msg":"Updating dataset Yemen Test","time":"2018-12-24T15:20:11.907Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":20,"msg":"dataset idc99d9ce1-5c25-479c-8707-a3ac95837573","time":"2018-12-24T15:20:11.907Z","v":0}
{"name":"hdx-index-adapter","hostname":"hdx-adapter-775477cd97-knqrs","pid":17,"level":30,"msg":"Adding authentication header ","time":"2018-12-24T15:20:11.907Z","v":0}
Unable to read csv file
